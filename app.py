import streamlit as st
import pandas as pd
from catboost import CatBoostClassifier

# â”€â”€â”€ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
@st.cache_resource
def load_model():
    model = CatBoostClassifier()
    model.load_model('phishing_detector_catboost.cbm')
    return model

model = load_model()

# â”€â”€â”€ Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ñ… Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°ĞºĞ¾Ğ² â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
base_features = [
    'having_IP_Address', 'URL_Length', 'having_At_Symbol', 'Prefix_Suffix',
    'having_Sub_Domain', 'SSLfinal_State', 'Domain_registeration_length', 'port',
    'Request_URL', 'URL_of_Anchor', 'Links_in_tags', 'SFH',
    'Submitting_to_email', 'Abnormal_URL', 'on_mouseover', 'age_of_domain',
    'DNSRecord', 'web_traffic', 'Page_Rank', 'Google_Index',
    'Links_pointing_to_page', 'Statistical_report'
]

# â”€â”€â”€ ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°ĞºĞ¾Ğ² â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
feature_descriptions = {
    'having_IP_Address': 'Ğ•ÑÑ‚ÑŒ Ğ»Ğ¸ IP-Ğ°Ğ´Ñ€ĞµÑ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ° Ğ² URL?',
    'URL_Length': 'Ğ”Ğ»Ğ¸Ğ½Ğ° URL (Ğ¾Ñ‡ĞµĞ½ÑŒ Ğ´Ğ»Ğ¸Ğ½Ğ½Ñ‹Ğµ â€” Ğ¿Ğ¾Ğ´Ğ¾Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹)',
    'having_At_Symbol': 'Ğ•ÑÑ‚ÑŒ Ğ»Ğ¸ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ» @ Ğ² URL?',
    'Prefix_Suffix': 'Ğ•ÑÑ‚ÑŒ Ğ»Ğ¸ Ğ´ĞµÑ„Ğ¸Ñ (-) Ğ² Ğ´Ğ¾Ğ¼ĞµĞ½Ğ½Ğ¾Ğ¼ Ğ¸Ğ¼ĞµĞ½Ğ¸?',
    'having_Sub_Domain': 'ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¿Ğ¾Ğ´Ğ´Ğ¾Ğ¼ĞµĞ½Ğ¾Ğ² (Ğ¼Ğ½Ğ¾Ğ³Ğ¾ â€” Ğ¿Ğ¾Ğ´Ğ¾Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾)',
    'SSLfinal_State': 'ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ SSL-ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ° (-1 â€” Ğ¿Ğ»Ğ¾Ñ…Ğ¾Ğ¹/Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚)',
    'Domain_registeration_length': 'Ğ¡Ñ€Ğ¾Ğº Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ° (ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğ¹ â€” Ğ¿Ğ¾Ğ´Ğ¾Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾)',
    'port': 'Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ»Ğ¸ Ğ½ĞµÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ñ€Ñ‚?',
    'Request_URL': '% Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ñ… Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ² Ğ² Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°Ñ…',
    'URL_of_Anchor': '% Ğ¿Ğ¾Ğ´Ğ¾Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… ÑÑÑ‹Ğ»Ğ¾Ğº Ğ² ÑĞºĞ¾Ñ€ÑÑ… (<a> Ñ‚ĞµĞ³Ğ¸)',
    'Links_in_tags': '% Ğ¿Ğ¾Ğ´Ğ¾Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… ÑÑÑ‹Ğ»Ğ¾Ğº Ğ² Ğ¼ĞµÑ‚Ğ°-Ñ‚ĞµĞ³Ğ°Ñ…',
    'SFH': 'Server Form Handler (ĞºÑƒĞ´Ğ° Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ÑÑ Ñ„Ğ¾Ñ€Ğ¼Ğ°)',
    'Submitting_to_email': 'ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ñ„Ğ¾Ñ€Ğ¼Ñ‹ Ğ½Ğ° email?',
    'Abnormal_URL': 'ĞĞ½Ğ¾Ğ¼Ğ°Ğ»Ğ¸Ğ¸ Ğ² ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğµ URL',
    'on_mouseover': 'Ğ˜Ğ·Ğ¼ĞµĞ½ÑĞµÑ‚ÑÑ Ğ»Ğ¸ status bar Ğ¿Ñ€Ğ¸ Ğ½Ğ°Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğ¸ Ğ¼Ñ‹ÑˆĞ¸?',
    'age_of_domain': 'Ğ’Ğ¾Ğ·Ñ€Ğ°ÑÑ‚ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ° (Ğ¼Ğ¾Ğ»Ğ¾Ğ´Ğ¾Ğ¹ â€” Ğ¿Ğ¾Ğ´Ğ¾Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾)',
    'DNSRecord': 'Ğ•ÑÑ‚ÑŒ Ğ»Ğ¸ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ² DNS?',
    'web_traffic': 'ĞŸĞ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ğ¾ÑÑ‚ÑŒ ÑĞ°Ğ¹Ñ‚Ğ° Ğ¿Ğ¾ Ñ‚Ñ€Ğ°Ñ„Ğ¸ĞºÑƒ',
    'Page_Rank': 'PageRank Ğ¾Ñ‚ Google',
    'Google_Index': 'ĞŸÑ€Ğ¾Ğ¸Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ Ğ»Ğ¸ ÑĞ°Ğ¹Ñ‚ Google?',
    'Links_pointing_to_page': 'ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ñ… ÑÑÑ‹Ğ»Ğ¾Ğº Ğ½Ğ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ',
    'Statistical_report': 'Ğ•ÑÑ‚ÑŒ Ğ»Ğ¸ Ğ² Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ğ°Ñ… Ğ¾ Ñ„Ğ¸ÑˆĞ¸Ğ½Ğ³Ğµ?'
}

# â”€â”€â”€ Ğ˜Ğ½Ğ¶ĞµĞ½ĞµÑ€Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°ĞºĞ¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
def add_engineered_features(df):
    df = df.copy()
    df['total_red_flags'] = (df == '-1').sum(axis=1).astype(str)
    df['ssl_anchor_interaction'] = (df['SSLfinal_State'].astype(int) *
                                    df['URL_of_Anchor'].astype(int)).astype(str)
    df['no_ssl_short_reg'] = ((df['SSLfinal_State'] == '-1') &
                              (df['Domain_registeration_length'] == '-1')).astype(int).astype(str)
    df['subdomain_prefix'] = (df['having_Sub_Domain'].astype(int) *
                              df['Prefix_Suffix'].astype(int)).astype(str)
    return df

# â”€â”€â”€ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.set_page_config(page_title="Phishing Detector", layout="wide", page_icon="ğŸ›¡ï¸")

# â”€â”€â”€ Sidebar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.sidebar.title("ğŸ›¡ï¸ Phishing Detector")
st.sidebar.markdown("**ĞĞ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ Ñ„Ğ¸ÑˆĞ¸Ğ½Ğ³Ğ¾Ğ²Ñ‹Ñ… ÑĞ°Ğ¹Ñ‚Ğ¾Ğ²**")
pages = ["Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ", "ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑĞ°Ğ¹Ñ‚Ğ°", "Ğ’ÑĞµ Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°ĞºĞ¸", "Ğ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸"]
page = st.sidebar.radio("ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ", pages)

# â”€â”€â”€ Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ Ñ ĞºÑ€ÑƒÑ‚Ñ‹Ğ¼Ğ¸ Ñ„Ğ¾Ñ‚Ğ¾ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
if page == "Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ":
    st.title("ğŸ›¡ï¸ Phishing Detector")
    
    # ĞŸĞµÑ€Ğ²Ğ¾Ğµ Ñ„Ğ¾Ñ‚Ğ¾ Ğ¸Ğ· Ñ‚Ğ²Ğ¾ĞµĞ³Ğ¾ ÑĞ¿Ğ¸ÑĞºĞ° (ĞºĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ´ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ / Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)
    st.image(
        "https://media.istockphoto.com/id/2174551157/ru/%D1%84%D0%BE%D1%82%D0%BE/%D0%BA%D0%BE%D0%BD%D1%86%D0%B5%D0%BF%D1%86%D0%B8%D1%8F-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B4%D0%B5%D0%BD%D1%86%D0%B8%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D0%B8-%D0%B1%D0%B8%D0%B7%D0%BD%D0%B5%D1%81-%D1%82%D0%B5%D1%85%D0%BD%D0%BE%D0%BB%D0%BE%D0%B3%D0%B8%D0%B9-%D0%BF%D0%BE-%D0%B7%D0%B0%D1%89%D0%B8%D1%82%D0%B5-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85-%D0%BA%D0%B8%D0%B1%D0%B5%D1%80%D0%B1%D0%B5%D0%B7%D0%BE%D0%BF%D0%B0%D1%81%D0%BD%D0%BE%D1%81%D1%82%D0%B8.jpg?s=2048x2048&w=is&k=20&c=6vG8K0tZ0z8pG5m2lXj9z8z8z8z8z8z8z8z8z8z8z8z8=",
        caption="ĞšĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸ ĞºĞ¸Ğ±ĞµÑ€Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸",
        use_column_width=True
    )
    
    st.markdown("""
    ### ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ ÑĞ°Ğ¹Ñ‚Ğ¾Ğ² Ğ½Ğ° Ñ„Ğ¸ÑˆĞ¸Ğ½Ğ³
    
    Ğ­Ñ‚Ğ¾ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Ğ½Ğ° Ğ±Ğ°Ğ·Ğµ Ğ¼Ğ°ÑˆĞ¸Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°ĞµÑ‚ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ,  
    ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ğ»Ğ¸ ÑĞ°Ğ¹Ñ‚ Ñ„Ğ¸ÑˆĞ¸Ğ½Ğ³Ğ¾Ğ²Ñ‹Ğ¼ Ğ¸Ğ»Ğ¸ Ğ»ĞµĞ³Ğ¸Ñ‚Ğ¸Ğ¼Ğ½Ñ‹Ğ¼.
    
    **Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº:** Muhamadasror  
    **ĞœĞµÑÑ‚Ğ¾:** Ğ”ÑƒÑˆĞ°Ğ½Ğ±Ğµ, Ğ¢Ğ°Ğ´Ğ¶Ğ¸ĞºĞ¸ÑÑ‚Ğ°Ğ½  
    **Ğ“Ğ¾Ğ´:** 2025â€“2026
    
    ĞœĞ¾Ğ´ĞµĞ»ÑŒ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ° Ğ½Ğ° 11 000+ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ°Ñ… Ğ¸ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¾Ñ‡ĞµĞ½ÑŒ Ğ²Ñ‹ÑĞ¾ĞºÑƒÑ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ.
    """)
    
    # Ğ”Ğ²Ğ° Ñ„Ğ¾Ñ‚Ğ¾ Ğ² ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ°Ñ… â€” Ñ„Ğ¸ÑˆĞ¸Ğ½Ğ³-Ğ°Ñ‚Ğ°ĞºĞ° Ğ¸ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ°
    col1, col2 = st.columns(2)
    
    with col1:
        st.image(
            "https://xakep.ru/wp-content/uploads/2018/03/158954/phishing.jpg",
            caption="ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ñ„Ğ¸ÑˆĞ¸Ğ½Ğ³Ğ¾Ğ²Ğ¾Ğ¹ Ğ°Ñ‚Ğ°ĞºĞ¸",
            use_column_width=True
        )
    
    with col2:
        st.image(
            "https://www.sberbank.ru/images/5970/1699370332928.jpg",
            caption="Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ ĞºĞ¸Ğ±ĞµÑ€ÑƒĞ³Ñ€Ğ¾Ğ·",
            use_column_width=True
        )
    
    st.markdown("**ĞŸĞµÑ€ĞµĞ¹Ğ´Ğ¸Ñ‚Ğµ Ğ² Ñ€Ğ°Ğ·Ğ´ĞµĞ» Â«ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑĞ°Ğ¹Ñ‚Ğ°Â»**, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ñ€Ğ¾Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ»ÑĞ±Ğ¾Ğ¹ ÑĞ°Ğ¹Ñ‚!")

# â”€â”€â”€ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑĞ°Ğ¹Ñ‚Ğ° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
elif page == "ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑĞ°Ğ¹Ñ‚Ğ°":
    st.title("ğŸ” ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑĞ°Ğ¹Ñ‚Ğ° Ğ½Ğ° Ñ„Ğ¸ÑˆĞ¸Ğ½Ğ³")
    
    st.info("""
    Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°ĞºĞ¾Ğ² ÑĞ°Ğ¹Ñ‚Ğ°, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ.  
    **-1** â€” Ğ¿Ğ¾Ğ´Ğ¾Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ / Ğ¿Ğ»Ğ¾Ñ…Ğ¾  
    **0** â€” Ğ½ĞµĞ¹Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ğ¾  
    **1** â€” Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾ / Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¾
    """)
    
    col1, col2 = st.columns(2)
    input_data = {}
    
    for i, feature in enumerate(base_features):
        with col1 if i % 2 == 0 else col2:
            val = st.selectbox(
                label=feature,
                options=["-1", "0", "1"],
                index=1,
                help=feature_descriptions.get(feature, ""),
                key=f"input_{feature}"
            )
            input_data[feature] = val
    
    if st.button("ğŸš€ ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑĞ°Ğ¹Ñ‚", type="primary", use_container_width=True):
        with st.spinner("ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒÑ..."):
            input_df = pd.DataFrame([input_data]).astype(str)
            enhanced_df = add_engineered_features(input_df)
            
            try:
                pred = model.predict(enhanced_df)[0]
                proba = model.predict_proba(enhanced_df)[0][1] * 100
                
                if pred == 1:
                    st.error(f"### âš ï¸ ĞĞŸĞĞ¡ĞĞ! Ğ¤Ğ¸ÑˆĞ¸Ğ½Ğ³Ğ¾Ğ²Ñ‹Ğ¹ ÑĞ°Ğ¹Ñ‚!\nĞ’ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ Ñ„Ğ¸ÑˆĞ¸Ğ½Ğ³Ğ°: **{proba:.1f}%**")
                    st.markdown("**ĞĞµ Ğ²Ğ²Ğ¾Ğ´Ğ¸Ñ‚Ğµ** Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ!")
                else:
                    st.success(f"### âœ… Ğ¡Ğ°Ğ¹Ñ‚ Ğ²Ñ‹Ğ³Ğ»ÑĞ´Ğ¸Ñ‚ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ñ‹Ğ¼\nĞ’ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ Ñ„Ğ¸ÑˆĞ¸Ğ½Ğ³Ğ°: **{proba:.1f}%**")
                    st.markdown("Ğ‘ÑƒĞ´ÑŒÑ‚Ğµ Ğ±Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹ â€” Ğ²ÑĞµĞ³Ğ´Ğ° Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞ¹Ñ‚Ğµ Ğ°Ğ´Ñ€ĞµÑ.")
            except Exception as e:
                st.error("ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ¿Ñ€ĞµĞ´ÑĞºĞ°Ğ·Ğ°Ğ½Ğ¸Ğ¸")
                st.caption(str(e))

# â”€â”€â”€ Ğ’ÑĞµ Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°ĞºĞ¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
elif page == "Ğ’ÑĞµ Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°ĞºĞ¸":
    st.title("ğŸ“‹ ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ²ÑĞµÑ… Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°ĞºĞ¾Ğ²")
    
    st.markdown("""
    - **-1** â†’ Ğ¿Ğ»Ğ¾Ñ…Ğ¾/Ğ¿Ğ¾Ğ´Ğ¾Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ (Ñ‡Ğ°ÑÑ‚Ğ¾ Ñ„Ğ¸ÑˆĞ¸Ğ½Ğ³)  
    - **0** â†’ Ğ½ĞµĞ¹Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ğ¾  
    - **1** â†’ Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¾/Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾
    """)
    
    for feature in base_features:
        with st.expander(f"**{feature}** â€” {feature_descriptions[feature]}"):
            st.markdown("### Ğ§Ñ‚Ğ¾ Ğ·Ğ½Ğ°Ñ‡Ğ¸Ñ‚ ĞºĞ°Ğ¶Ğ´Ğ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ?")
            
            if feature == 'SSLfinal_State':
                st.markdown("- **-1** â†’ ĞĞµÑ‚/Ğ¿Ğ»Ğ¾Ñ…Ğ¾Ğ¹ SSL â€” Ğ¾Ñ‡ĞµĞ½ÑŒ Ğ¿Ğ»Ğ¾Ñ…Ğ¾!\n- **1** â†’ Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ½Ñ‹Ğ¹ HTTPS â€” Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾")
            elif feature == 'URL_of_Anchor':
                st.markdown("- **-1** â†’ ĞŸĞ¾Ğ´Ğ¾Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ ÑÑÑ‹Ğ»ĞºĞ¸ â€” Ğ¾Ñ‡ĞµĞ½ÑŒ Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾\n- **1** â†’ Ğ§ĞµÑÑ‚Ğ½Ñ‹Ğµ ÑÑÑ‹Ğ»ĞºĞ¸")
            else:
                st.markdown("- **-1** â†’ ĞŸĞ¾Ğ´Ğ¾Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾\n- **1** â†’ Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾")
            
            st.caption("Ğ‘Ğ¾Ğ»ÑŒÑˆĞµ -1 = Ğ²Ñ‹ÑˆĞµ Ñ€Ğ¸ÑĞº Ñ„Ğ¸ÑˆĞ¸Ğ½Ğ³Ğ°.")

# â”€â”€â”€ Ğ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
elif page == "Ğ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸":
    st.title("â„¹ï¸ Ğ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸")
    
    st.markdown("""
    - **ĞĞ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼:** CatBoost  
    - **ROC-AUC:** 0.995  
    - **Accuracy:** ~97%  
    - **Recall Ğ¿Ğ¾ Ñ„Ğ¸ÑˆĞ¸Ğ½Ğ³Ñƒ:** 95â€“96% (Ğ½Ğµ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ Ğ¾Ğ¿Ğ°ÑĞ½Ñ‹Ğµ ÑĞ°Ğ¹Ñ‚Ñ‹!)
    
    Ğ¢Ğ¾Ğ¿-Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°ĞºĞ¸: URL_of_Anchor, SSLfinal_State...
    """)

st.sidebar.markdown("---")
st.sidebar.caption("v2.0 â€¢ Muhamadasror â€¢ 2026")
